/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package adf.grpc;

import java.util.List;

import com.proto.transporter.CallPythonGrpc;
import com.proto.transporter.ObjectList;

import io.grpc.ManagedChannel;
import io.grpc.ManagedChannelBuilder;

public class GRPCTranspoter {
    final ManagedChannel channel = ManagedChannelBuilder.forAddress("localhost", 50051).usePlaintext().build();
    final CallPythonGrpc.CallPythonBlockingStub stub = CallPythonGrpc.newBlockingStub(channel);

    public List<Double> createRequestList(int size) {
        return java.util.stream.IntStream.range(0, size).mapToObj(i -> {
            return Math.random();
        }).toList();
    }

    public ObjectList getEcho(ObjectList request) {
        return stub.getEcho(request);
    }

    @Override
    protected void finalize() throws Throwable {
        channel.shutdown();
    }
}